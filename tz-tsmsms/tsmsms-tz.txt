Техническое задание. Разработка сервиса Tsmsms

1. Назначение сервиса - предоставление интерфейса для отправки и чтения SMS, а так же для получения событий о новых входящих SMS. 

2. Сервис должен предоставлять методы на шине UBUS:
    - отправить SMS
    - получить количество принятых SMS
    - прочитать одно SMS по индексу
    - прочитать все SMS 
    - стереть SMS по индексу
    - стереть все SMS

3. Чтение, отправка и стирание SMS должны выполняться посредством передачи AT-команд модему через сервис Tsmodem.

4. Должна быть предусмотрена возможность повторной отправки SMS в случае ошибки. В случае, когда количество попыток отправить SMS истекло, текст SMS должен быть передан сервису отправки Email. При этом, факт ошибки отправки SMS должен быть отражен в журнале событий и в Web UI.

5. Сервис должен дублировать событие Tsmodem на шине UBUS о получении нового SMS.

6. Сервис должен иметь режим отладки.

7. Сервис должен быть реализован используя метод конечных автоматов (Машина состояний). Допускается использование сторонних библиотек, реализующих машину состояний. Диаграмма состояний сервиса прилагается. Допускается вносить изменения и уточнения в диаграмму состояний в ходе разработки.

8. Сервис должен блокировать доступ к Tsmodem на время отправки SMS с помощью методов межпроцессной синхронизации (IPC) операционной системы. 

9. Начальная реализация сервиса Tsmsms https://github.com/antoncom/tsmsms.
